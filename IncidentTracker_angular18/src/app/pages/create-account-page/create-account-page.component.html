<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Create Account</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
  <div class="container-fluid d-flex align-items-center justify-content-center min-vh-100 py-5">
    <div class="card shadow-sm create-card w-100">

      <div class="card-header bg-light text-center">
        <i class="bi bi-person-plus-fill fs-1 text-primary mb-2"></i>
        <h2 class="mb-1 fw-bold">Create New User</h2>
        <p class="text-muted mb-0">Add a new user to the system</p>
      </div>

      <div class="card-body px-4 py-5">
        <div class="alert alert-success d-none" id="successMessage">
          <i class="bi bi-check-circle-fill me-2"></i>
          User created successfully!
        </div>

        <form id="userCreateForm" #userCreateForm="ngForm" (ngSubmit)="onSave()" novalidate>
          <!-- Email -->
          <div class="mb-4">
            <label for="email" class="form-label fw-semibold">Email Address</label>
            <div class="input-group" [ngClass]="{ 'is-invalid': showEmailError }">
              <span class="input-group-text"><i class="bi bi-envelope-fill"></i></span>
              <input
                type="email"
                id="email"
                name="Email"
                class="form-control"
                placeholder="user@example.com"
                [(ngModel)]="newUserObj.Email"
                required
                maxlength="50"
              />
            </div>
            <div class="invalid-feedback d-block" *ngIf="showEmailError">
              Please enter a valid email address.
            </div>
            <div class="form-text">
              <i class="bi bi-info-circle me-1"></i> This will be used to log in
            </div>
            <div class="invalid-feedback d-block" id="emailError"></div>
          </div>

          <!-- Display Name -->
          <div class="mb-4">
            <label for="displayName" class="form-label fw-semibold">Display Name</label>
            <div class="input-group" [ngClass]="{ 'is-invalid': showDisplayNameError }">
              <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
              <input
                type="text"
                id="displayName"
                name="DisplayName"
                class="form-control"
                placeholder="John Doe"
                [(ngModel)]="newUserObj.DisplayName"
                required
                minlength="2"
                maxlength="50"
              />
            </div>
            <div class="invalid-feedback d-block" *ngIf="showDisplayNameError">
              Display name is required.
            </div>
            <div class="form-text">
              <i class="bi bi-info-circle me-1"></i> This name will be visible to others
            </div>
            <div class="invalid-feedback d-block" id="displayNameError"></div>
          </div>

          <!-- Role -->
          <div class="mb-4">
            <label for="role" class="form-label fw-semibold">User Role</label>
            <div class="input-group" [ngClass]="{ 'is-invalid': showRoleError }">
              <span class="input-group-text"><i class="bi bi-shield-fill"></i></span>
              <select
                id="role"
                name="Role"
                class="form-select"
                [(ngModel)]="newUserObj.Role"
                required
              >
                <option value="" disabled selected>Choose a role...</option>
                <option value="Employee">Employee</option>
                <option value="Support Agent">Support Agent</option>
              </select>
            </div>
            <div class="invalid-feedback d-block" *ngIf="showRoleError">
              Please select a user role.
            </div>
            <div class="form-text">
              <i class="bi bi-info-circle me-1"></i> Role determines your user experience
            </div>
            <div class="invalid-feedback d-block" id="roleError"></div>
          </div>

          <!-- Buttons -->
          <div class="d-flex justify-content-end gap-3 mt-5">
            <button type="button" class="btn btn-outline-secondary" routerLink="/login">
              <i class="bi bi-x-circle me-1"></i> Cancel
            </button>
            <button type="submit" class="btn btn-primary">
              <span class="spinner-border spinner-border-sm me-2 loading-spinner" role="status"></span>
              <i class="bi bi-person-plus me-1"></i> Create User
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html>

